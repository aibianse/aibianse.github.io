import{v as K,i as ft,c as N,r as f,o as pt,a as vt,b as De,f as ht,d as pe,u as Xe,e as gt,t as Ae,g as mt,h as Ke,j as yt,k as bt,l as Me,m as O,V as wt,n as xt,p as Ct,N as We,q as St,T as _t,w as Z,s as kt,x as Rt,y as Tt,z as Bt,A as It,B as Nt,C as ae,D as $t,E as At,F as re,G as Mt,H as we,I as Pe,J as Pt,K as Ut,L as Ge,M as Vt,O as zt,P as Ot,Q as je,R as Et,S as _e,U as Ue,W as Ft,X as x,Y as V,Z as B,_ as r,$ as L,a0 as fe,a1 as Ye,a2 as b,a3 as Je,a4 as Dt,a5 as Gt,a6 as jt,a7 as Lt,a8 as Ht,a9 as qt,aa as Qt,ab as Xt,ac as ne,ad as Le,ae as g,af as le,ag as se,ah as Kt,ai as Wt,aj as xe,ak as F,al as Ie,am as Ne,an as Yt,ao as J,ap as Jt,aq as Zt,ar as ea,as as ta,at as aa,au as na,av as He,aw as la}from"./index-25022d87.js";import{N as Ce}from"./Image-d14b2b6d.js";import{N as Se}from"./Spin-5bb6c7a0.js";function sa(t){if(typeof t=="number")return{"":t.toString()};const s={};return t.split(/ +/).forEach(n=>{if(n==="")return;const[i,o]=n.split(":");o===void 0?s[""]=i:s[i]=o}),s}function oe(t,s){var n;if(t==null)return;const i=sa(t);if(s===void 0)return i[""];if(typeof s=="string")return(n=i[s])!==null&&n!==void 0?n:i[""];if(Array.isArray(s)){for(let o=s.length-1;o>=0;--o){const d=s[o];if(d in i)return i[d]}return i[""]}else{let o,d=-1;return Object.keys(i).forEach(c=>{const p=Number(c);!Number.isNaN(p)&&s>=p&&p>=d&&(d=p,o=i[c])}),o}}function oa(t){var s;const n=(s=t.dirs)===null||s===void 0?void 0:s.find(({dir:i})=>i===K);return!!(n&&n.value===!1)}const ra={xs:0,s:640,m:1024,l:1280,xl:1536,"2xl":1920};function ia(t){return`(min-width: ${t}px)`}const ce={};function ua(t=ra){if(!ft)return N(()=>[]);if(typeof window.matchMedia!="function")return N(()=>[]);const s=f({}),n=Object.keys(t),i=(o,d)=>{o.matches?s.value[d]=!0:s.value[d]=!1};return n.forEach(o=>{const d=t[o];let c,p;ce[d]===void 0?(c=window.matchMedia(ia(d)),c.addEventListener?c.addEventListener("change",S=>{p.forEach(h=>{h(S,o)})}):c.addListener&&c.addListener(S=>{p.forEach(h=>{h(S,o)})}),p=new Set,ce[d]={mql:c,cbs:p}):(c=ce[d].mql,p=ce[d].cbs),p.add(i),c.matches&&p.forEach(S=>{S(c,o)})}),pt(()=>{n.forEach(o=>{const{cbs:d}=ce[t[o]];d.has(i)&&d.delete(i)})}),N(()=>{const{value:o}=s;return n.filter(d=>o[d])})}function da(t){return t.map(Ze)}function Ze(t){var s,n;return typeof t=="string"?{label:t,value:t}:t.type==="group"?{type:"group",label:(s=t.label)!==null&&s!==void 0?s:t.name,value:(n=t.value)!==null&&n!==void 0?n:t.name,key:t.key||t.name,children:t.children.map(o=>Ze(o))}:t}const ca=vt([De("auto-complete",`
 z-index: auto;
 position: relative;
 display: inline-flex;
 width: 100%;
 `),De("auto-complete-menu",`
 margin: 4px 0;
 box-shadow: var(--n-menu-box-shadow);
 `,[ht({originalTransition:"background-color .3s var(--n-bezier), box-shadow .3s var(--n-bezier)"})])]),fa=Object.assign(Object.assign({},Ke.props),{to:Me.propTo,menuProps:Object,bordered:{type:Boolean,default:void 0},clearable:{type:Boolean,default:void 0},defaultValue:{type:String,default:null},loading:{type:Boolean,default:void 0},disabled:{type:Boolean,default:void 0},placeholder:String,placement:{type:String,default:"bottom-start"},value:String,blurAfterSelect:Boolean,clearAfterSelect:Boolean,getShow:Function,inputProps:Object,renderOption:Function,renderLabel:Function,size:String,options:{type:Array,default:()=>[]},zIndex:Number,status:String,"onUpdate:value":[Function,Array],onUpdateValue:[Function,Array],onSelect:[Function,Array],onBlur:[Function,Array],onFocus:[Function,Array],onInput:[Function,Array]}),qe=pe({name:"AutoComplete",props:fa,setup(t){const{mergedBorderedRef:s,namespaceRef:n,mergedClsPrefixRef:i,inlineThemeDisabled:o}=Xe(t),d=gt(t),{mergedSizeRef:c,mergedDisabledRef:p,mergedStatusRef:S}=d,h=f(null),$=f(null),C=f(t.defaultValue),R=Ae(t,"value"),T=mt(R,C),A=f(!1),M=f(!1),I=Ke("AutoComplete","-auto-complete",ca,Tt,t,i),_=N(()=>da(t.options)),m=N(()=>{const{getShow:u}=t;return u?u(T.value||""):!!T.value}),H=N(()=>m.value&&A.value&&!!_.value.length),E=N(()=>Bt(_.value,Nt("value","children")));function P(u){const{"onUpdate:value":y,onUpdateValue:U,onInput:G}=t,{nTriggerFormInput:j,nTriggerFormChange:be}=d;U&&ae(U,u),y&&ae(y,u),G&&ae(G,u),C.value=u,j(),be()}function k(u){const{onSelect:y}=t,{nTriggerFormInput:U,nTriggerFormChange:G}=d;y&&ae(y,u),U(),G()}function D(u){const{onBlur:y}=t,{nTriggerFormBlur:U}=d;y&&ae(y,u),U()}function W(u){const{onFocus:y}=t,{nTriggerFormFocus:U}=d;y&&ae(y,u),U()}function q(){M.value=!0}function z(){window.setTimeout(()=>{M.value=!1},0)}function ie(u){var y,U,G;switch(u.key){case"Enter":if(!M.value){const j=(y=$.value)===null||y===void 0?void 0:y.getPendingTmNode();j&&(ee(j.rawNode),u.preventDefault())}break;case"ArrowDown":(U=$.value)===null||U===void 0||U.next();break;case"ArrowUp":(G=$.value)===null||G===void 0||G.prev();break}}function ee(u){(u==null?void 0:u.value)!==void 0&&(k(u.value),t.clearAfterSelect?P(null):u.label!==void 0&&P(u.label),A.value=!1,t.blurAfterSelect&&ge())}function ue(){P(null)}function ve(u){A.value=!0,W(u)}function ke(u){A.value=!1,D(u)}function Re(u){A.value=!0,P(u)}function he(u){ee(u.rawNode)}function Te(u){var y;!((y=h.value)===null||y===void 0)&&y.contains(It(u))||(A.value=!1)}function ge(){var u,y;!((u=h.value)===null||u===void 0)&&u.contains(document.activeElement)&&((y=document.activeElement)===null||y===void 0||y.blur())}const me=N(()=>{const{common:{cubicBezierEaseInOut:u},self:{menuBoxShadow:y}}=I.value;return{"--n-menu-box-shadow":y,"--n-bezier":u}}),Q=o?yt("auto-complete",void 0,me,t):void 0,de=f(null),ye={focus:()=>{var u;(u=de.value)===null||u===void 0||u.focus()},blur:()=>{var u;(u=de.value)===null||u===void 0||u.blur()}};return{focus:ye.focus,blur:ye.blur,inputInstRef:de,uncontrolledValue:C,mergedValue:T,isMounted:bt(),adjustedTo:Me(t),menuInstRef:$,triggerElRef:h,treeMate:E,mergedSize:c,mergedDisabled:p,active:H,mergedStatus:S,handleClear:ue,handleFocus:ve,handleBlur:ke,handleInput:Re,handleToggle:he,handleClickOutsideMenu:Te,handleCompositionStart:q,handleCompositionEnd:z,handleKeyDown:ie,mergedTheme:I,cssVars:o?void 0:me,themeClass:Q==null?void 0:Q.themeClass,onRender:Q==null?void 0:Q.onRender,mergedBordered:s,namespace:n,mergedClsPrefix:i}},render(){const{mergedClsPrefix:t}=this;return O("div",{class:`${t}-auto-complete`,ref:"triggerElRef",onKeydown:this.handleKeyDown,onCompositionstart:this.handleCompositionStart,onCompositionend:this.handleCompositionEnd},O(wt,null,{default:()=>[O(xt,null,{default:()=>{if(this.$slots.default)return Ct(this.$slots,"default",{handleInput:this.handleInput,handleFocus:this.handleFocus,handleBlur:this.handleBlur,value:this.mergedValue});const{mergedTheme:n}=this;return O(We,{ref:"inputInstRef",status:this.mergedStatus,theme:n.peers.Input,themeOverrides:n.peerOverrides.Input,bordered:this.mergedBordered,value:this.mergedValue,placeholder:this.placeholder,size:this.mergedSize,disabled:this.mergedDisabled,clearable:this.clearable,loading:this.loading,inputProps:this.inputProps,onClear:this.handleClear,onFocus:this.handleFocus,onUpdateValue:this.handleInput,onBlur:this.handleBlur},{suffix:()=>{var i,o;return(o=(i=this.$slots).suffix)===null||o===void 0?void 0:o.call(i)},prefix:()=>{var i,o;return(o=(i=this.$slots).prefix)===null||o===void 0?void 0:o.call(i)}})}}),O(St,{show:this.active,to:this.adjustedTo,containerClass:this.namespace,zIndex:this.zIndex,teleportDisabled:this.adjustedTo===Me.tdkey,placement:this.placement,width:"target"},{default:()=>O(_t,{name:"fade-in-scale-up-transition",appear:this.isMounted},{default:()=>{var s;if((s=this.onRender)===null||s===void 0||s.call(this),!this.active)return null;const{menuProps:n}=this;return Z(O(Rt,Object.assign({},n,{clsPrefix:t,ref:"menuInstRef",theme:this.mergedTheme.peers.InternalSelectMenu,themeOverrides:this.mergedTheme.peerOverrides.InternalSelectMenu,"auto-pending":!0,class:[`${t}-auto-complete-menu`,this.themeClass,n==null?void 0:n.class],style:[n==null?void 0:n.style,this.cssVars],treeMate:this.treeMate,multiple:!1,renderLabel:this.renderLabel,renderOption:this.renderOption,size:"medium",onToggle:this.handleToggle})),[[kt,this.handleClickOutsideMenu,void 0,{capture:!0}]])}})})]}))}}),Qe=1,et=$t("n-grid"),tt=1,pa={span:{type:[Number,String],default:tt},offset:{type:[Number,String],default:0},suffix:Boolean,privateOffset:Number,privateSpan:Number,privateColStart:Number,privateShow:{type:Boolean,default:!0}},va=pe({__GRID_ITEM__:!0,name:"GridItem",alias:["Gi"],props:pa,setup(){const{isSsrRef:t,xGapRef:s,itemStyleRef:n,overflowRef:i,layoutShiftDisabledRef:o}=Mt(et),d=At();return{overflow:i,itemStyle:n,layoutShiftDisabled:o,mergedXGap:N(()=>re(s.value||0)),deriveStyle:()=>{t.value;const{privateSpan:c=tt,privateShow:p=!0,privateColStart:S=void 0,privateOffset:h=0}=d.vnode.props,{value:$}=s,C=re($||0);return{display:p?"":"none",gridColumn:`${S??`span ${c}`} / span ${c}`,marginLeft:h?`calc((100% - (${c} - 1) * ${C}) / ${c} * ${h} + ${C} * ${h})`:""}}}},render(){var t,s;if(this.layoutShiftDisabled){const{span:n,offset:i,mergedXGap:o}=this;return O("div",{style:{gridColumn:`span ${n} / span ${n}`,marginLeft:i?`calc((100% - (${n} - 1) * ${o}) / ${n} * ${i} + ${o} * ${i})`:""}},this.$slots)}return O("div",{style:[this.itemStyle,this.deriveStyle()]},(s=(t=this.$slots).default)===null||s===void 0?void 0:s.call(t,{overflow:this.overflow}))}}),ha={xs:0,s:640,m:1024,l:1280,xl:1536,xxl:1920},at=24,$e="__ssr__",ga={layoutShiftDisabled:Boolean,responsive:{type:[String,Boolean],default:"self"},cols:{type:[Number,String],default:at},itemResponsive:Boolean,collapsed:Boolean,collapsedRows:{type:Number,default:1},itemStyle:[Object,String],xGap:{type:[Number,String],default:0},yGap:{type:[Number,String],default:0}},ma=pe({name:"Grid",inheritAttrs:!1,props:ga,setup(t){const{mergedClsPrefixRef:s,mergedBreakpointsRef:n}=Xe(t),i=/^\d+$/,o=f(void 0),d=ua((n==null?void 0:n.value)||ha),c=we(()=>!!(t.itemResponsive||!i.test(t.cols.toString())||!i.test(t.xGap.toString())||!i.test(t.yGap.toString()))),p=N(()=>{if(c.value)return t.responsive==="self"?o.value:d.value}),S=we(()=>{var _;return(_=Number(oe(t.cols.toString(),p.value)))!==null&&_!==void 0?_:at}),h=we(()=>oe(t.xGap.toString(),p.value)),$=we(()=>oe(t.yGap.toString(),p.value)),C=_=>{o.value=_.contentRect.width},R=_=>{Et(C,_)},T=f(!1),A=N(()=>{if(t.responsive==="self")return R}),M=f(!1),I=f();return Pe(()=>{const{value:_}=I;_&&_.hasAttribute($e)&&(_.removeAttribute($e),M.value=!0)}),Pt(et,{layoutShiftDisabledRef:Ae(t,"layoutShiftDisabled"),isSsrRef:M,itemStyleRef:Ae(t,"itemStyle"),xGapRef:h,overflowRef:T}),{isSsr:!Ut,contentEl:I,mergedClsPrefix:s,style:N(()=>t.layoutShiftDisabled?{width:"100%",display:"grid",gridTemplateColumns:`repeat(${t.cols}, minmax(0, 1fr))`,columnGap:re(t.xGap),rowGap:re(t.yGap)}:{width:"100%",display:"grid",gridTemplateColumns:`repeat(${S.value}, minmax(0, 1fr))`,columnGap:re(h.value),rowGap:re($.value)}),isResponsive:c,responsiveQuery:p,responsiveCols:S,handleResize:A,overflow:T}},render(){if(this.layoutShiftDisabled)return O("div",Ge({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style},this.$attrs),this.$slots);const t=()=>{var s,n,i,o,d,c,p;this.overflow=!1;const S=zt(Ot(this)),h=[],{collapsed:$,collapsedRows:C,responsiveCols:R,responsiveQuery:T}=this;S.forEach(m=>{var H,E,P,k,D;if(((H=m==null?void 0:m.type)===null||H===void 0?void 0:H.__GRID_ITEM__)!==!0)return;if(oa(m)){const z=je(m);z.props?z.props.privateShow=!1:z.props={privateShow:!1},h.push({child:z,rawChildSpan:0});return}m.dirs=((E=m.dirs)===null||E===void 0?void 0:E.filter(({dir:z})=>z!==K))||null,((P=m.dirs)===null||P===void 0?void 0:P.length)===0&&(m.dirs=null);const W=je(m),q=Number((D=oe((k=W.props)===null||k===void 0?void 0:k.span,T))!==null&&D!==void 0?D:Qe);q!==0&&h.push({child:W,rawChildSpan:q})});let A=0;const M=(s=h[h.length-1])===null||s===void 0?void 0:s.child;if(M!=null&&M.props){const m=(n=M.props)===null||n===void 0?void 0:n.suffix;m!==void 0&&m!==!1&&(A=Number((o=oe((i=M.props)===null||i===void 0?void 0:i.span,T))!==null&&o!==void 0?o:Qe),M.props.privateSpan=A,M.props.privateColStart=R+1-A,M.props.privateShow=(d=M.props.privateShow)!==null&&d!==void 0?d:!0)}let I=0,_=!1;for(const{child:m,rawChildSpan:H}of h){if(_&&(this.overflow=!0),!_){const E=Number((p=oe((c=m.props)===null||c===void 0?void 0:c.offset,T))!==null&&p!==void 0?p:0),P=Math.min(H+E,R);if(m.props?(m.props.privateSpan=P,m.props.privateOffset=E):m.props={privateSpan:P,privateOffset:E},$){const k=I%R;P+k>R&&(I+=R-k),P+I+A>C*R?_=!0:I+=P}}_&&(m.props?m.props.privateShow!==!0&&(m.props.privateShow=!1):m.props={privateShow:!1})}return O("div",Ge({ref:"contentEl",class:`${this.mergedClsPrefix}-grid`,style:this.style,[$e]:this.isSsr||void 0},this.$attrs),h.map(({child:m})=>m))};return this.isResponsive&&this.responsive==="self"?O(Vt,{onResize:this.handleResize},{default:t}):t()}});function ya(){const t=f(null);return{scrollRef:t,scrollToBottom:async()=>{await _e(),t.value&&(t.value.scrollTop=t.value.scrollHeight)},scrollToTop:async()=>{await _e(),t.value&&(t.value.scrollTop=0)},scrollToBottomIfAtBottom:async()=>{await _e(),t.value&&t.value.scrollHeight-t.value.scrollTop-t.value.clientHeight<=100&&(t.value.scrollTop=t.value.scrollHeight)}}}function ba(){const t=Ue();return{addChat:(d,c)=>{t.addChatByUuid(d,c)},updateChat:(d,c,p)=>{t.updateChatByUuid(d,c,p)},updateChatSome:(d,c,p)=>{t.updateChatSomeByUuid(d,c,p)},getChatByUuidAndIndex:(d,c)=>t.getChatByUuidAndIndex(d,c)}}const wa={class:"sticky top-0 left-0 right-0 z-30 border-b dark:border-neutral-800 bg-white/80 dark:bg-black/20 backdrop-blur"},xa={class:"relative flex items-center justify-between min-w-0 overflow-hidden h-14"},Ca={class:"flex items-center"},Sa={class:"flex items-center space-x-2"},_a=pe({__name:"index",emits:["handleSelect"],setup(t,{emit:s}){const n=Ft(),i=Ue(),o=N(()=>n.siderCollapsed),d=N(()=>i.getChatHistoryByCurrentActive);function c(){n.setSiderCollapsed(!o.value)}function p(){const C=document.querySelector("#scrollRef");C&&_e(()=>C.scrollTop=0)}function S(C){s("handleSelect",C)}const h=f(10),$=[{label:"散图模式",value:10},{label:"套图模式",value:30}];return(C,R)=>{var T;return x(),V("header",wa,[B("div",xa,[B("div",Ca,[B("button",{class:"flex items-center justify-center w-11 h-11",onClick:c},[r(o)?(x(),L(r(fe),{key:0,class:"text-2xl",icon:"ri:align-justify"})):(x(),L(r(fe),{key:1,class:"text-2xl",icon:"ri:align-right"}))])]),B("h1",{class:"flex-1 px-4 pr-6 overflow-hidden cursor-pointer select-none text-ellipsis whitespace-nowrap",onDblclick:p},Ye(((T=r(d))==null?void 0:T.title)??""),33),B("div",Sa,[b(r(Je),{value:h.value,"onUpdate:value":[R[0]||(R[0]=A=>h.value=A),S],options:$,style:{margin:"30px",width:"110px"}},null,8,["value"])])])])}}}),ka={class:"flex flex-col w-full h-full"},Ra={class:"flex-1 overflow-hidden"},Ta={class:"image_wrap"},Ba={key:1,class:"group_image_text"},Ia={key:2,class:"group_image_text"},Na=["onClick"],$a={style:{"text-align":"center"}},Aa={class:"w-full max-w-screen-xl m-auto"},Ma={class:"flex items-center justify-between space-x-2"},Pa={class:"button-spacing"},Ua={class:"dark:text-black"},Va=pe({__name:"index",setup(t){const s=f([]),n=f(1),i=f(0),o=f(!0),d=f(!1),c=f(!1),p=f([]),S=f(""),h=f([]),$=f([]),C=f(!0),R=f(!1);Pe(async()=>{await A(),h.value=$.value,await T(h.value,1),j(10,1)});const T=async(a,l)=>{if(s.value.length=0,n.value=l,a.length===0){console.log("标签参数为空");return}try{const e=await Dt(a,n.value);for(let v=0;v<e.data.rows.length;v++){const w=e.data.rows[v];v%2,w.url=w.url.replace("aibianse.pages.dev","cdn.aibianse.com"),s.value.push(w)}i.value=Math.ceil(e.data.total/20),o.value=!0}catch(e){console.error(e)}},A=async()=>{$.value=[];try{const l=(await Gt()).data.rows;for(const e in l)$.value.push(l[e].name)}catch{Y.error("查询标签失败，请刷新页面重试！")}};function M(){d.value=!0,$.value.length===0&&A()}const I=f([]);function _(a){I.value=[],I.value=a}function m(){I.value.length>0&&(I.value=h.value)}function H(){I.value.length===0?Y.error("查询的标签为空！"):(T(I.value,1),Y.success("查询中，知道你很急，但你先别急..."),h.value=I.value)}async function E(a){p.value.length=0,c.value=!0;const l=await ta(a);for(let e=0;e<l.data.rows.length;e++){const v=l.data.rows[e];e%2,v.url=v.url.replace("aibianse.pages.dev","cdn.aibianse.com"),p.value.push(v)}S.value=l.data.rows[0].name||"详情"}const P=f([]),k=f(""),D=f([]),W=f(!1),q=f(1),z=f(""),ie=f(!1),ee=f([]);async function ue(){await me(k.value),await ve()}async function ve(){ee.value[ee.value.length-1].scrollIntoView({behavior:"smooth"})}const ke=a=>{a&&ee.value.push(a)};async function Re(a){D.value=[],W.value=!0,z.value=a,q.value=1,await he(z.value,q.value),aa(a)}async function he(a,l){try{const e=await na(a,l);if(e.data.rows.length==0)Y.success("查询成功，已经没有了！");else{const v=e.data.rows[0].urls;for(let w=0;w<v.length;w++)w%2,D.value.push(v[w].replace("aibianse.pages.dev","cdn.aibianse.com"))}}catch{Y.error("查询失败！")}finally{}}async function Te(){ie.value=!0,setTimeout(()=>{ie.value=!1},2e3),q.value++,he(z.value,q.value)}async function ge(a,l){try{return(await Wt(a,l)).data}catch(e){Y.error(e)}finally{}}async function me(a){if(!a||a.trim()==="")return;k.value="";const l=await ge(a,1);P.value.push({search_keyword:a,image_data:l.rows,totalPages:Math.ceil(l.total/10),currentPage:1})}async function Q(a,l){const e=l;if(a.search_keyword==="   目录   "){const v=await be(10,e);a.image_data=v.rows,a.currentPage=e}else{const v=await ge(a.search_keyword,e);a.image_data=v.rows,a.currentPage=e}}const de=N(()=>ze.value||!k.value||k.value.trim()==="");function ye(a){X.value?a.key==="Enter"&&a.ctrlKey&&(a.preventDefault(),ue()):a.key==="Enter"&&!a.shiftKey&&(a.preventDefault(),ue())}const u=N(()=>X.value?He("chat.placeholderMobile"):He("chat.placeholder")),y=f(10);function U(a){y.value=a,a==30?(C.value=!1,R.value=!0):(C.value=!0,R.value=!1)}const G=[{label:"散图模式",value:10},{label:"套图模式",value:30}];async function j(a,l){const e=f("");a===10?e.value="   目录   ":a===20?e.value="最热":a===30?e.value="最新":a===40?e.value="巧遇":Y.error("类型错误！");const v=await be(a,l);P.value.push({search_keyword:e.value,image_data:v.rows,totalPages:Math.ceil(v.total/10),currentPage:1}),await ve()}async function be(a,l){try{return(await jt(a,l)).data}catch{Y.error("查询失败！")}finally{}}let nt=new AbortController;const lt=Kt(),Y=Lt(),st=Ue(),{isMobile:X}=Ht(),{updateChatSome:ot}=ba(),{scrollRef:rt,scrollToBottom:it}=ya(),{uuid:Ve}=lt.params,ut=N(()=>st.getChatByUuid(+Ve)),ze=f(!1),Be=f(null),dt=qt(),{promptList:Oe}=Qt(dt);ut.value.forEach((a,l)=>{a.loading&&ot(+Ve,l,{loading:!1})});const Ee=N(()=>k.value.startsWith("/")?Oe.value.filter(a=>a.key.toLowerCase().includes(k.value.substring(1).toLowerCase())).map(a=>({label:a.value,value:a.value})):[]),Fe=a=>{for(const l of Oe.value)if(l.value===a.label)return[l.key];return[]},ct=N(()=>{let a=["p-4"];return X.value&&(a=["sticky","left-0","bottom-0","right-0","p-2","pr-3","overflow-hidden"]),a});return Pe(()=>{var a;it(),Be.value&&!X.value&&((a=Be.value)==null||a.focus())}),Xt(()=>{ze.value&&nt.abort()}),(a,l)=>(x(),V("div",ka,[r(X)?(x(),L(_a,{key:0,onHandleSelect:U})):ne("",!0),B("main",Ra,[B("div",{id:"scrollRef",ref_key:"scrollRef",ref:rt,class:"h-full overflow-hidden overflow-y-auto"},[B("div",{id:"image-wrapper image-scroll-container",class:Le(["w-full max-w-screen-xl m-auto dark:bg-[#101014]",[r(X)?"p-2":"p-4"]])},[Z(B("div",Ta,[b(r(Ie),{show:c.value,"onUpdate:show":l[0]||(l[0]=e=>c.value=e),class:"custom-card",preset:"card",style:{width:"95%",maxWidth:"650px"},title:S.value,size:"huge",bordered:!1,segmented:{content:"soft",footer:"soft"}},{default:g(()=>[(x(!0),V(le,null,se(p.value,(e,v)=>(x(),L(r(Ce),{lazy:"",key:v,src:e.url},{placeholder:g(()=>[B("div",{style:xe({width:e.width+"px",height:e.height<1e3?e.height*.3+"px":e.height>=1e3&&e.height<=2e3?e.height*.2+"px":e.height*.1+"px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#0001"})},[b(r(Se),null,{default:g(()=>[F(" 知道你很急，但是你先别急... ")]),_:1})],4)]),_:2},1032,["src"]))),128))]),_:1},8,["show","title"]),(x(!0),V(le,null,se(s.value,(e,v)=>(x(),V("div",{key:v,class:"image_item"},[e.type===10?(x(),L(r(Ce),{key:0,lazy:"",src:e.url,"intersection-observer-options":{root:null,rootMargin:"0px 0px 200px 0px",threshold:.5}},{placeholder:g(()=>[B("div",{style:xe({width:e.width+"px",height:e.height<1e3?e.height*.3+"px":e.height>=1e3&&e.height<=2e3?e.height*.2+"px":e.height*.1+"px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#0001"})},[b(r(Se),null,{default:g(()=>[F(" 知道你很急，但是你先别急... ")]),_:1})],4)]),_:2},1032,["src","intersection-observer-options"])):ne("",!0),e.type===20?(x(),V("div",Ba,"组图")):ne("",!0),e.type===30?(x(),V("div",Ia,"套图")):ne("",!0),e.type!==10?(x(),L(r(Ce),{key:3,lazy:"",src:e.url,"preview-disabled":"","intersection-observer-options":{root:null,rootMargin:"0px 0px 200px 0px",threshold:.5},onClick:w=>E(e.group_id)},{placeholder:g(()=>[B("div",{style:xe({width:e.width+"px",height:e.height<1e3?e.height*.3+"px":e.height>=1e3&&e.height<=2e3?e.height*.2+"px":e.height*.1+"px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#0001"})},[b(r(Se),null,{default:g(()=>[F(" 知道你很急，但是你先别急... ")]),_:1})],4)]),_:2},1032,["src","intersection-observer-options","onClick"])):ne("",!0)]))),128))],512),[[K,C.value]]),(x(!0),V(le,null,se(P.value,(e,v)=>Z((x(),V("div",{key:v,class:"image_card",ref_for:!0,ref:ke},[b(r(Yt),{title:"搜索关键字："+e.search_keyword,segmented:{content:!0,footer:"soft"}},{"header-extra":g(()=>[]),footer:g(()=>[F(" 广告位招租 ")]),action:g(()=>[B("div",$a,[b(r(Ne),{page:e.currentPage,"onUpdate:page":[w=>e.currentPage=w,w=>Q(e,e.currentPage)],"page-count":e.totalPages,"onUpdate:pageSize":w=>Q(e,e.currentPage),size:"large",simple:""},null,8,["page","onUpdate:page","page-count","onUpdate:pageSize"])])]),default:g(()=>[B("ul",null,[(x(!0),V(le,null,se(e.image_data,(w,te)=>(x(),V("li",{key:te,class:"image_name",onClick:za=>Re(w.id)},Ye(te+1+"、"+w.name),9,Na))),128))])]),_:2},1032,["title"]),b(r(Ie),{show:W.value,"onUpdate:show":l[1]||(l[1]=w=>W.value=w),class:"custom-card",id:"image-scroll-container",preset:"card",style:{width:"95%",maxWidth:"650px",textAlign:"center"},title:"",size:"huge",bordered:!1,segmented:{content:"soft",footer:"soft"}},{default:g(()=>[(x(!0),V(le,null,se(D.value,(w,te)=>(x(),V("div",{key:te},[b(r(Ce),{lazy:"",src:w},{placeholder:g(()=>[B("div",{style:xe({width:"1000px",height:"300px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#0001"})},[b(r(Se),null,{default:g(()=>[F(" 知道你很急，但是你先别急... ")]),_:1})],4)]),_:2},1032,["src"])]))),128)),b(r(J),{onClick:Te,loading:ie.value,style:{width:"100%"}},{default:g(()=>[F(" 加载更多 ")]),_:1},8,["loading"])]),_:2},1032,["show"])])),[[K,R.value]])),128))],2)],512)]),B("footer",{class:Le(r(ct))},[B("div",Aa,[B("div",Ma,[r(X)?ne("",!0):(x(),L(r(Je),{key:0,value:y.value,"onUpdate:value":[l[2]||(l[2]=e=>y.value=e),U],options:G,style:{margin:"30px",width:"100px"}},null,8,["value"])),b(r(Jt),{overlap:!1,placement:"top",trigger:"click"},{trigger:g(()=>[Z(b(r(J),null,{default:g(()=>[b(r(fe),{icon:"ep:menu"})]),_:1},512),[[K,R.value]])]),default:g(()=>[B("div",Pa,[b(r(J),{onClick:l[3]||(l[3]=e=>j(10,1))},{default:g(()=>[F("目录")]),_:1}),b(r(J),{onClick:l[4]||(l[4]=e=>j(20,1))},{default:g(()=>[F("最热")]),_:1}),b(r(J),{onClick:l[5]||(l[5]=e=>j(30,1))},{default:g(()=>[F("最新")]),_:1}),b(r(J),{onClick:l[6]||(l[6]=e=>j(40,1))},{default:g(()=>[F("巧遇")]),_:1})])]),_:1}),Z(b(r(qe),{value:k.value,"onUpdate:value":l[8]||(l[8]=e=>k.value=e),options:r(Ee),"render-label":Fe,style:{width:"70%"}},{default:g(({handleInput:e,handleBlur:v,handleFocus:w})=>[b(r(We),{ref_key:"inputRef",ref:Be,value:k.value,"onUpdate:value":l[7]||(l[7]=te=>k.value=te),type:"textarea",placeholder:r(u),autosize:{minRows:1,maxRows:r(X)?4:8},onInput:e,onFocus:w,onBlur:v,onKeypress:ye},null,8,["value","placeholder","autosize","onInput","onFocus","onBlur"])]),_:1},8,["value","options"]),[[K,R.value]]),Z(b(r(J),{type:"primary",disabled:r(de),onClick:ue},{icon:g(()=>[B("span",Ua,[b(r(fe),{icon:"lucide:search"})])]),_:1},8,["disabled"]),[[K,R.value]]),Z(b(r(qe),{value:k.value,"onUpdate:value":l[15]||(l[15]=e=>k.value=e),options:r(Ee),"render-label":Fe,style:{width:"70%"}},{default:g(()=>[r(X)?(x(),L(r(Ne),{key:1,page:n.value,"onUpdate:page":[l[12]||(l[12]=e=>n.value=e),l[13]||(l[13]=e=>T(h.value,n.value))],"page-count":i.value,"onUpdate:pageSize":l[14]||(l[14]=e=>T(h.value,n.value)),size:"large",simple:""},null,8,["page","page-count"])):(x(),L(r(Ne),{key:0,page:n.value,"onUpdate:page":[l[9]||(l[9]=e=>n.value=e),l[10]||(l[10]=e=>T(h.value,n.value))],"page-count":i.value,"page-slot":5,size:"large","show-quick-jumper":"","onUpdate:pageSize":l[11]||(l[11]=e=>T(h.value,n.value))},null,8,["page","page-count"]))]),_:1},8,["value","options"]),[[K,C.value]]),Z(b(r(J),{onClick:M},{default:g(()=>[b(r(fe),{icon:"lucide:search"}),F(" 标签筛选 ")]),_:1},512),[[K,C.value]]),b(r(Ie),{show:d.value,"onUpdate:show":l[16]||(l[16]=e=>d.value=e),preset:"dialog",title:"选择标签","positive-text":"筛选","negative-text":"取消",onPositiveClick:H,onNegativeClick:m},{default:g(()=>[b(r(Zt),{value:I.value,"onUpdate:value":_},{default:g(()=>[b(r(ma),{"y-gap":8,cols:2},{default:g(()=>[(x(!0),V(le,null,se($.value,(e,v)=>(x(),L(r(va),{key:v},{default:g(()=>[b(r(ea),{value:e,label:e},null,8,["value","label"])]),_:2},1024))),128))]),_:1})]),_:1},8,["value"])]),_:1},8,["show"])])])],2)]))}});const Da=la(Va,[["__scopeId","data-v-f30daa9b"]]);export{Da as default};
