import{d as a,v as e,e as l,E as s,G as i,n as o,u,c as n,q as t,p as v,a as c,w as r,C as d,A as p,W as m,X as f,o as y,t as _,H as b,x as g,F as h,J as k,M as w,N as x}from"./vue-vendor-ca37f3ab.js";import{c as C,e as j,D as M}from"./common-af2d1236.js";import{c as z,b as H,a as L}from"./image-modules-8dab8a3d.js";import{v as S}from"./movie-modules-260099ed.js";import{E as T,i as D,p as R,v as q,x as A}from"./naive-ui-5b39965d.js";import"./utils-f1e0c1c0.js";import"./layout-a72d7ad8.js";const B=a=>(w("data-v-8818b579"),a=a(),x(),a),E={class:"flex flex-col w-full h-full"},I={class:"flex-1 overflow-hidden"},N={id:"scrollRef",class:"h-full overflow-hidden overflow-y-auto"},O={class:"movie-detail-container"},P={key:0,class:"player-wrapper"},W={key:1,class:"info-section"},F={class:"movie-header"},G={class:"movie-info"},J={class:"info-item"},V=B((()=>v("span",{class:"label"},"品番：",-1))),X={class:"value"},$={class:"info-item"},K=B((()=>v("span",{class:"label"},"出演者：",-1))),Q={class:"value"},U={class:"info-item"},Y=B((()=>v("span",{class:"label"},"导演：",-1))),Z={class:"value"},aa={class:"info-item"},ea=B((()=>v("span",{class:"label"},"发布日期：",-1))),la={class:"value"},sa={class:"info-item"},ia=B((()=>v("span",{class:"label"},"制造商：",-1))),oa={class:"value"},ua={class:"info-item"},na=B((()=>v("span",{class:"label"},"时长：",-1))),ta={class:"value"},va={class:"info-items"},ca={class:"info-item"},ra=["innerHTML"],da={key:1,class:"info-item"},pa=["innerHTML"],ma={key:2,class:"expand-more"},fa={key:2,class:"episodes-section"},ya=L(a({__name:"RebdDetail",setup(a){const w=C().token,{isMobile:x}=j(),L=p(),B=e(!1),ya=e(!0),_a=e(null),ba=e(""),ga=e(0),ha=e(!1),ka=e({page:1,pageSize:20,itemCount:0}),wa=l((()=>{var a;if(!(null==(a=_a.value)?void 0:a.vod_play_urls))return[];const e=(ka.value.page-1)*ka.value.pageSize,l=e+ka.value.pageSize;return _a.value.vod_play_urls.slice(e,l)})),xa=e(null);function Ca(a){xa.value&&(xa.value.destroy(),xa.value=null),d((()=>{var e;const l=document.querySelector(".player-wrapper");if(!l)return;const s=new m({container:l,url:a,type:"mp4",poster:null==(e=_a.value)?void 0:e.cover_image_url,volume:.5,isLive:!1,muted:!1,autoplay:!1,hotkey:!0,pip:!0,autoSize:!0,autoMini:!0,setting:!0,loop:!1,flip:!0,playbackRate:!0,aspectRatio:!0,fullscreen:!0,fullscreenWeb:!0,subtitleOffset:!0,miniProgressBar:!0,mutex:!0,backdrop:!0,playsInline:!0,autoPlayback:!0,theme:"#23ade5",lang:"zh-cn",moreVideoAttr:{crossOrigin:"anonymous",preload:"auto"},icons:{loading:"加载中，知道你很急，但是你先别急..."},plugins:[f({html:`<img src="${S}" style="max-width: 55%; height: auto;">`,url:"https://www.profitablecpmrate.com/esayrydd5?key=76d97011d161ef42efe0d75ec211c794",playDuration:5,totalDuration:10,i18n:{close:"关闭广告",countdown:"%s秒",detail:"查看详情",canBeClosed:"%s秒后可关闭广告"}})]});xa.value=s;let i=!1;s.on("video:timeupdate",(()=>{!i&&s.currentTime>=300&&void 0===w&&Number(L.params.source)>=6&&(i=!0,s.pause(),B.value=!0,s.on("video:play",(()=>{s.pause(),B.value=!0})))})),s.on("error",(()=>{s.notice.show="视频加载失败，请稍后重试"})),s.on("ready",(()=>{}))}))}function ja(){B.value=!1}return s((()=>{!async function(){try{const a=await M(L.params.code);0===a.code&&a.data.length>0&&(_a.value=a.data[0],ka.value.itemCount=_a.value.vod_play_urls.length,_a.value.vod_play_urls.length>0&&(ba.value=_a.value.vod_play_urls[0].play_url,ga.value=0,d((()=>{Ca(ba.value)}))))}catch(a){}finally{ya.value=!1}}()})),i((()=>{xa.value&&(xa.value.destroy(),xa.value=null)})),(a,e)=>{var l;return y(),o("div",E,[u(x)?(y(),n(H,{key:0})):t("",!0),v("main",I,[v("div",N,[v("div",O,[ba.value?(y(),o("div",P)):t("",!0),_a.value?(y(),o("div",W,[c(u(R),null,{default:r((()=>[v("div",F,[v("div",G,[v("h1",null,_(_a.value.name),1),c(u(T),{vertical:"",size:"small"},{default:r((()=>[v("div",J,[V,v("span",X,_(_a.value.code),1)]),v("div",$,[K,v("span",Q,_(_a.value.actor),1)]),v("div",U,[Y,v("span",Z,_(_a.value.director),1)]),v("div",aa,[ea,v("span",la,_(_a.value.publish_time),1)]),v("div",sa,[ia,v("span",oa,_(_a.value.manufacturer),1)]),v("div",ua,[na,v("span",ta,_(_a.value.video_length)+"分钟",1)]),u(x)?(y(),o("div",{key:0,class:b(["expandable-content",{collapsed:!ha.value}])},[v("div",va,[v("div",ca,[v("div",{class:"value movie-desc",innerHTML:_a.value.description},null,8,ra)])])],2)):(y(),o("div",da,[v("div",{class:"value movie-desc",innerHTML:_a.value.description},null,8,pa)])),u(x)?(y(),o("div",ma,[c(u(D),{text:"",onClick:e[0]||(e[0]=a=>ha.value=!ha.value)},{default:r((()=>[g(_(ha.value?"收起":"展开更多"),1)])),_:1})])):t("",!0)])),_:1})])])])),_:1})])):t("",!0),(null==(l=_a.value)?void 0:l.vod_play_urls.length)?(y(),o("div",fa,[c(u(R),{title:"剧集列表"},{default:r((()=>[c(u(q),{cols:u(x)?4:8,"x-gap":8,"y-gap":8},{default:r((()=>[(y(!0),o(h,null,k(u(wa),((a,e)=>(y(),n(u(A),{key:e},{default:r((()=>[c(u(D),{block:"",onClick:e=>{return l=a.play_url,ba.value=l,void Ca(l);var l}},{default:r((()=>[g(_(0===e?"预览":"正片"),1)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1},8,["cols"])])),_:1})])):t("",!0)])]),c(z,{visible:B.value,onCancel:ja},null,8,["visible"])])])}}}),[["__scopeId","data-v-8818b579"]]);export{ya as default};
