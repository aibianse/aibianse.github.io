import{d as e,h as t,o as a,c as s,w as o,a as i,u as n,r,b as l,e as c,m as u,I as d,f as p,g as m,i as h,j as v,k as g,l as f,n as y,p as x,t as w,q as S,s as k,v as C,x as _,y as b,F as T,z as R,A as P,B as I,C as E}from"./vue-vendor-12459f3a.js";import{N as $,a as O,b as U,c as z,u as j,d as A,e as N,f as L,g as D,h as M,i as H,j as B,k as J,l as V,m as q,n as G,o as F,p as W,q as K,r as Y,s as Q,t as X,v as Z,w as ee,x as te}from"./naive-ui-832a6a86.js";import{a as ae}from"./utils-08c8755b.js";import{_ as se}from"./layout-1e32b24b.js";const oe=e({__name:"index",setup(l){const c=e({name:"NaiveProviderContent",setup(){window.$loadingBar=j(),window.$dialog=A(),window.$message=N(),window.$notification=L()},render:()=>t("div")});return(e,t)=>(a(),s(n(z),null,{default:o((()=>[i(n(U),null,{default:o((()=>[i(n($),null,{default:o((()=>[i(n(O),null,{default:o((()=>[r(e.$slots,"default"),i(n(c))])),_:3})])),_:3})])),_:3})])),_:3}))}}),ie=e({__name:"index",props:{icon:{type:String,default:""}},setup(e){const t=l(),o=c((()=>({class:t.class||"",style:t.style||""})));return(t,i)=>(a(),s(n(d),u({icon:e.icon},n(o)),null,16,["icon"]))}}),ne=p();function re(e){const{expire:t}=Object.assign({expire:604800},e);function a(e){window.localStorage.removeItem(e)}return{set:function(e,a){const s={data:a,expire:null!==t?(new Date).getTime()+1e3*t:null},o=JSON.stringify(s);window.localStorage.setItem(e,o)},get:function(e){const t=window.localStorage.getItem(e);if(t){let s=null;try{s=JSON.parse(t)}catch{}if(s){const{data:e,expire:t}=s;if(null===t||t>=Date.now())return e}return a(e),null}},remove:a,clear:function(){window.localStorage.clear()}}}re();const le=re({expire:null}),ce="appSetting",ue=m("app-store",{state:()=>({siderCollapsed:!1,theme:"light",language:"zh-CN",...le.get(ce)}),actions:{setSiderCollapsed(e){this.siderCollapsed=e,this.recordState()},setTheme(e){this.theme=e,this.recordState()},setLanguage(e){this.language!==e&&(this.language=e,this.recordState())},recordState(){var e;e=this.$state,le.set(ce,e)}}}),de="chatStorage";function pe(){const e=1002;return{active:e,usingContext:!0,history:[{uuid:e,title:"",isEdit:!1}],chat:[{uuid:e,data:[]}]}}const me={},he=function(e,t,a){if(!t||0===t.length)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map((e=>{if((e=function(e){return"https://cdn.lookimage.live/"+e}(e))in me)return;me[e]=!0;const t=e.endsWith(".css"),o=t?'[rel="stylesheet"]':"";if(a)for(let a=s.length-1;a>=0;a--){const o=s[a];if(o.href===e&&(!t||"stylesheet"===o.rel))return}else if(document.querySelector(`link[href="${e}"]${o}`))return;const i=document.createElement("link");return i.rel=t?"stylesheet":"modulepreload",t||(i.as="script",i.crossOrigin=""),i.href=e,document.head.appendChild(i),t?new Promise(((t,a)=>{i.addEventListener("load",t),i.addEventListener("error",(()=>a(new Error(`Unable to preload CSS for ${e}`))))})):void 0}))).then((()=>e()))},ve="SECRET_TOKEN",ge="localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname||window.location.hostname.includes("192.168")?"http://127.0.0.1:5000":"https://api.lookimage.live",fe=ae.create({baseURL:ge});function ye({url:e,data:t,method:a,headers:s,onDownloadProgress:o,signal:i,beforeRequest:n,afterRequest:r}){const l=e=>{const t=$e();return"Success"===e.data.status||"string"==typeof e.data?e.data:("Unauthorized"===e.data.status&&(t.removeToken(),window.location.reload()),Promise.reject(e.data))},c=e=>{throw null==r||r(),new Error((null==e?void 0:e.message)||"Error")};null==n||n(),a=a||"GET";const u=Object.assign("function"==typeof t?t():t??{},{});return"GET"===a?fe.get(e,{params:u,signal:i,onDownloadProgress:o}).then(l,c):fe.post(e,u,{headers:s,signal:i,onDownloadProgress:o}).then(l,c)}function xe({url:e,data:t,method:a="GET",onDownloadProgress:s,signal:o,beforeRequest:i,afterRequest:n}){return ye({url:e,method:a,data:t,onDownloadProgress:s,signal:o,beforeRequest:i,afterRequest:n})}function we({url:e,data:t,method:a="POST",headers:s,onDownloadProgress:o,signal:i,beforeRequest:n,afterRequest:r}){return ye({url:e,method:a,data:t,headers:s,onDownloadProgress:o,signal:i,beforeRequest:n,afterRequest:r})}function Se(e){return we({url:"/verify",data:{verify_password:e}})}function ke(e,t,a){return xe({url:"/image",data:{tag:e.join(","),page_num:t},signal:a.signal})}function Ce(){return xe({url:"/image_tag"})}function _e(e){return xe({url:"/image_group_detail",data:{id:e}})}function be(e,t){return xe({url:"/image_sets",data:{name:e,page_num:t}})}function Te(e,t){return xe({url:"/image_sets_detail",data:{id:e,page_num:t}})}function Re(e){return we({url:"/image_sets_detail_click_count",data:{id:e}})}function Pe(e,t){return xe({url:"/image_sets_by_type",data:{type:e,page_num:t}})}function Ie(e,t){return xe({url:"/movie_search",data:{search_keyword:e,source:t}})}function Ee(e,t){return xe({url:"/movie_detail",data:{source:e,vod_id:t}})}fe.interceptors.request.use((e=>{const t=$e().token;return t&&(e.headers.Authorization=`Bearer ${t}`),e}),(e=>Promise.reject(e.response))),fe.interceptors.response.use((e=>{if(200===e.status)return e;throw new Error(e.status.toString())}),(e=>Promise.reject(e)));const $e=m("auth-store",{state:()=>({token:le.get(ve),session:null}),actions:{async getSession(){try{const{data:e}=await we({url:"/session"});return this.session={...e},Promise.resolve(e)}catch(e){return Promise.reject(e)}},setToken(e){this.token=e,function(e){le.set(ve,e)}(e)},removeToken(){this.token=void 0,le.remove(ve)}}});function Oe(){return{isMobile:h(v).smaller("sm")}}const Ue=[{path:"/",name:"Root",component:se,children:[{path:"",name:"Home",component:()=>he((()=>import("./index-efe12230.js")),["assets/js/index-efe12230.js","assets/js/vue-vendor-12459f3a.js","assets/css/vue-vendor-aaa8bf00.css","assets/js/image-modules-1cc4ba43.js","assets/js/utils-08c8755b.js","assets/js/naive-ui-832a6a86.js","assets/css/image-modules-4f117294.css","assets/js/layout-1e32b24b.js","assets/css/layout-215532e4.css","assets/css/index-f84b0a0b.css"])},{path:"/image/image-tag",name:"ImageTag",component:()=>he((()=>import("./image-modules-1cc4ba43.js").then((e=>e.c))),["assets/js/image-modules-1cc4ba43.js","assets/js/utils-08c8755b.js","assets/js/naive-ui-832a6a86.js","assets/js/vue-vendor-12459f3a.js","assets/css/vue-vendor-aaa8bf00.css","assets/css/image-modules-4f117294.css"])},{path:"/image/image-set-search",name:"ImageSetSearch",component:()=>he((()=>import("./image-modules-1cc4ba43.js").then((e=>e.d))),["assets/js/image-modules-1cc4ba43.js","assets/js/utils-08c8755b.js","assets/js/naive-ui-832a6a86.js","assets/js/vue-vendor-12459f3a.js","assets/css/vue-vendor-aaa8bf00.css","assets/css/image-modules-4f117294.css"])},{path:"/image/image-set-detail/:id",name:"ImageSetDetail",component:()=>he((()=>import("./image-modules-1cc4ba43.js").then((e=>e.e))),["assets/js/image-modules-1cc4ba43.js","assets/js/utils-08c8755b.js","assets/js/naive-ui-832a6a86.js","assets/js/vue-vendor-12459f3a.js","assets/css/vue-vendor-aaa8bf00.css","assets/css/image-modules-4f117294.css"])},{path:"/more",name:"More",component:()=>he((()=>import("./layout-1e32b24b.js").then((e=>e.P))),["assets/js/layout-1e32b24b.js","assets/js/vue-vendor-12459f3a.js","assets/css/vue-vendor-aaa8bf00.css","assets/js/image-modules-1cc4ba43.js","assets/js/utils-08c8755b.js","assets/js/naive-ui-832a6a86.js","assets/css/image-modules-4f117294.css","assets/css/layout-215532e4.css"])},{path:"/movie/movie-search",name:"MovieSearch",component:()=>he((()=>import("./movie-modules-64060106.js").then((e=>e.M))),["assets/js/movie-modules-64060106.js","assets/js/vue-vendor-12459f3a.js","assets/css/vue-vendor-aaa8bf00.css","assets/js/image-modules-1cc4ba43.js","assets/js/utils-08c8755b.js","assets/js/naive-ui-832a6a86.js","assets/css/image-modules-4f117294.css","assets/css/movie-modules-18affe9d.css"])},{path:"/movie/movie-detail/:source/:id",name:"MovieDetail",component:()=>he((()=>import("./movie-modules-64060106.js").then((e=>e.a))),["assets/js/movie-modules-64060106.js","assets/js/vue-vendor-12459f3a.js","assets/css/vue-vendor-aaa8bf00.css","assets/js/image-modules-1cc4ba43.js","assets/js/utils-08c8755b.js","assets/js/naive-ui-832a6a86.js","assets/css/image-modules-4f117294.css","assets/css/movie-modules-18affe9d.css"])}]},{path:"/404",name:"404",component:()=>he((()=>import("./index-7a88cee0.js")),["assets/js/index-7a88cee0.js","assets/js/vue-vendor-12459f3a.js","assets/css/vue-vendor-aaa8bf00.css","assets/js/naive-ui-832a6a86.js","assets/js/utils-08c8755b.js"])},{path:"/500",name:"500",component:()=>he((()=>import("./index-ab39636b.js")),["assets/js/index-ab39636b.js","assets/js/vue-vendor-12459f3a.js","assets/css/vue-vendor-aaa8bf00.css","assets/js/image-modules-1cc4ba43.js","assets/js/utils-08c8755b.js","assets/js/naive-ui-832a6a86.js","assets/css/image-modules-4f117294.css","assets/js/layout-1e32b24b.js","assets/css/layout-215532e4.css"])},{path:"/:pathMatch(.*)*",name:"notFound",redirect:"/404"},{path:"/admin",name:"admin",component:()=>he((()=>import("./index-15033637.js")),["assets/js/index-15033637.js","assets/js/naive-ui-832a6a86.js","assets/js/vue-vendor-12459f3a.js","assets/css/vue-vendor-aaa8bf00.css","assets/js/utils-08c8755b.js"])}],ze=g({history:f(),routes:Ue,scrollBehavior:()=>({left:0,top:0})});async function je(e){e.use(ze),await ze.isReady()}ze.beforeEach((async(e,t,a)=>{const s=$e(ne);if(s.session)a();else try{const t=await s.getSession();"false"===String(t.auth)&&s.token&&s.removeToken(),"/500"===e.path?a({name:"Root"}):a()}catch(o){"/500"!==e.path?a({name:"500"}):a()}}));const Ae=m("chat-store",{state:()=>function(){const e=le.get(de);return{...pe(),...e}}(),getters:{getChatHistoryByCurrentActive(e){const t=e.history.findIndex((t=>t.uuid===e.active));return-1!==t?e.history[t]:null},getChatByUuid:e=>t=>{var a,s;return t?(null==(a=e.chat.find((e=>e.uuid===t)))?void 0:a.data)??[]:(null==(s=e.chat.find((t=>t.uuid===e.active)))?void 0:s.data)??[]}},actions:{setUsingContext(e){this.usingContext=e,this.recordState()},addHistory(e,t=[]){this.history.unshift(e),this.chat.unshift({uuid:e.uuid,data:t}),this.active=e.uuid,this.reloadRoute(e.uuid)},updateHistory(e,t){const a=this.history.findIndex((t=>t.uuid===e));-1!==a&&(this.history[a]={...this.history[a],...t},this.recordState())},async deleteHistory(e){if(this.history.splice(e,1),this.chat.splice(e,1),0===this.history.length)return this.active=null,void this.reloadRoute();if(e>0&&e<=this.history.length){const t=this.history[e-1].uuid;return this.active=t,void this.reloadRoute(t)}if(0===e&&this.history.length>0){const e=this.history[0].uuid;this.active=e,this.reloadRoute(e)}if(e>this.history.length){const e=this.history[this.history.length-1].uuid;this.active=e,this.reloadRoute(e)}},async setActive(e){return this.active=e,await this.reloadRoute(e)},getChatByUuidAndIndex(e,t){if(!e||0===e)return this.chat.length?this.chat[0].data[t]:null;const a=this.chat.findIndex((t=>t.uuid===e));return-1!==a?this.chat[a].data[t]:null},addChatByUuid(e,t){if(!e||0===e)if(0===this.history.length){const e=Date.now();this.history.push({uuid:e,title:t.text,isEdit:!1}),this.chat.push({uuid:e,data:[t]}),this.active=e,this.recordState()}else this.chat[0].data.push(t),""===this.history[0].title&&(this.history[0].title=t.text),this.recordState();const a=this.chat.findIndex((t=>t.uuid===e));-1!==a&&(this.chat[a].data.push(t),""===this.history[a].title&&(this.history[a].title=t.text),this.recordState())},updateChatByUuid(e,t,a){if(!e||0===e)return void(this.chat.length&&(this.chat[0].data[t]=a,this.recordState()));const s=this.chat.findIndex((t=>t.uuid===e));-1!==s&&(this.chat[s].data[t]=a,this.recordState())},updateChatSomeByUuid(e,t,a){if(!e||0===e)return void(this.chat.length&&(this.chat[0].data[t]={...this.chat[0].data[t],...a},this.recordState()));const s=this.chat.findIndex((t=>t.uuid===e));-1!==s&&(this.chat[s].data[t]={...this.chat[s].data[t],...a},this.recordState())},deleteChatByUuid(e,t){if(!e||0===e)return void(this.chat.length&&(this.chat[0].data.splice(t,1),this.recordState()));const a=this.chat.findIndex((t=>t.uuid===e));-1!==a&&(this.chat[a].data.splice(t,1),this.recordState())},clearChatByUuid(e){if(!e||0===e)return void(this.chat.length&&(this.chat[0].data=[],this.recordState()));const t=this.chat.findIndex((t=>t.uuid===e));-1!==t&&(this.chat[t].data=[],this.recordState())},clearHistory(){this.$state={...pe()},this.recordState()},async reloadRoute(e){this.recordState(),await ze.push({name:"Chat",params:{uuid:e}})},recordState(){var e;e=this.$state,le.set(de,e)}}}),Ne="userStorage",Le=m("user-store",{state:()=>({userInfo:{avatar:"",name:"Photograph Show",description:""},...le.get(Ne)}),actions:{updateUserInfo(e){this.userInfo={...this.userInfo,...e},this.recordState()},resetUserInfo(){this.userInfo={avatar:"",name:"Photograph Show",description:""},this.recordState()},recordState(){var e;e=this.$state,le.set(Ne,e)}}}),De="promptStore",Me=m("prompt-store",{state:()=>le.get(De)??{promptList:[]},actions:{updatePromptList(e){var t;this.$patch({promptList:e}),t={promptList:e},le.set(De,t)},getPromptList(){return this.$state}}}),He="settingsStorage",Be=m("setting-store",{state:()=>({systemMessage:"You are ChatGPT, a large language model trained by OpenAI. Follow the user's instructions carefully. Respond using markdown.",temperature:.8,top_p:1,...le.get(He)}),actions:{updateSetting(e){this.$state={...this.$state,...e},this.recordState()},resetSetting(){this.$state={systemMessage:"You are ChatGPT, a large language model trained by OpenAI. Follow the user's instructions carefully. Respond using markdown.",temperature:.8,top_p:1},le.remove(He)},recordState(){var e;e=this.$state,le.set(He,e)}}});function Je(e){e.use(ne)}const Ve="https://cdn.lookimage.live/assets/img/avatar-990d73c4.jpg";function qe(e){return"[object String]"===Object.prototype.toString.call(e)}const Ge={class:"flex items-center overflow-hidden"},Fe={class:"w-10 h-10 overflow-hidden rounded-full shrink-0"},We={class:"flex-1 min-w-0 ml-2"},Ke={class:"overflow-hidden font-bold text-md text-ellipsis whitespace-nowrap"},Ye={class:"overflow-hidden text-xs text-gray-500 text-ellipsis whitespace-nowrap"},Qe=["innerHTML"],Xe=e({__name:"index",setup(e){const t=Le(),o=c((()=>t.userInfo));return(e,t)=>(a(),y("div",Ge,[x("div",Fe,[n(qe)(n(o).avatar)&&n(o).avatar.length>0?(a(),s(n(D),{key:0,size:"large",round:"",src:n(o).avatar,"fallback-src":n(Ve)},null,8,["src","fallback-src"])):(a(),s(n(D),{key:1,size:"large",round:"",src:n(Ve)},null,8,["src"]))]),x("div",We,[x("h2",Ke,w(e.$t("setting.siteName")),1),x("p",Ye,[n(qe)(n(o).description)&&""!==n(o).description?(a(),y("span",{key:0,innerHTML:n(o).description},null,8,Qe)):S("",!0)])])]))}}),Ze=k({locale:ue(ne).language||"zh-CN",fallbackLocale:"en-US",allowComposition:!0,messages:{"en-US":{common:{add:"Add",addSuccess:"Add Success",edit:"Edit",editSuccess:"Edit Success",delete:"Delete",deleteSuccess:"Delete Success",save:"Save",saveSuccess:"Save Success",reset:"Reset",action:"Action",export:"Export",exportSuccess:"Export Success",import:"Import",importSuccess:"Import Success",clear:"Clear",clearSuccess:"Clear Success",yes:"Yes",no:"No",confirm:"Confirm",download:"Download",noData:"No Data",wrong:"Something went wrong, please try again later.",success:"Success",failed:"Failed",verify:"Verify",unauthorizedTips:"Unauthorized, please verify first.",stopResponding:"Stop Responding"},chat:{newChatButton:"New Chat",placeholder:'Ask me anything...(Shift + Enter = line break, "/" to trigger prompts)',placeholderMobile:"Ask me anything...",copy:"Copy",copied:"Copied",copyCode:"Copy Code",clearChat:"Clear Chat",clearChatConfirm:"Are you sure to clear this chat?",exportImage:"Export Image",exportImageConfirm:"Are you sure to export this chat to png?",exportSuccess:"Export Success",exportFailed:"Export Failed",usingContext:"Context Mode",turnOnContext:"In the current mode, sending messages will carry previous chat records.",turnOffContext:"In the current mode, sending messages will not carry previous chat records.",deleteMessage:"Delete Message",deleteMessageConfirm:"Are you sure to delete this message?",deleteHistoryConfirm:"Are you sure to clear this history?",clearHistoryConfirm:"Are you sure to clear chat history?",preview:"Preview",showRawText:"Show as raw text"},setting:{setting:"Setting",general:"General",advanced:"Advanced",config:"Config",avatarLink:"Avatar Link",name:"Name",description:"Description",role:"Role",temperature:"Temperature",top_p:"Top_p",resetUserInfo:"Reset UserInfo",chatHistory:"ChatHistory",theme:"Theme",language:"Language",api:"API",reverseProxy:"Reverse Proxy",timeout:"Timeout",socks:"Socks",httpsProxy:"HTTPS Proxy",balance:"API Balance",monthlyUsage:"Monthly Usage"},store:{siderButton:"Prompt Store",local:"Local",online:"Online",title:"Title",description:"Description",clearStoreConfirm:"Whether to clear the data?",importPlaceholder:"Please paste the JSON data here",addRepeatTitleTips:"Title duplicate, please re-enter",addRepeatContentTips:"Content duplicate: {msg}, please re-enter",editRepeatTitleTips:"Title conflict, please revise",editRepeatContentTips:"Content conflict {msg} , please re-modify",importError:"Key value mismatch",importRepeatTitle:"Title repeatedly skipped: {msg}",importRepeatContent:"Content is repeatedly skipped: {msg}",onlineImportWarning:"Note: Please check the JSON file source!",downloadError:"Please check the network status and JSON file validity"}},"ko-KR":{common:{add:"추가",addSuccess:"추가 성공",edit:"편집",editSuccess:"편집 성공",delete:"삭제",deleteSuccess:"삭제 성공",save:"저장",saveSuccess:"저장 성공",reset:"초기화",action:"액션",export:"내보내기",exportSuccess:"내보내기 성공",import:"가져오기",importSuccess:"가져오기 성공",clear:"비우기",clearSuccess:"비우기 성공",yes:"예",no:"아니오",confirm:"확인",download:"다운로드",noData:"데이터 없음",wrong:"문제가 발생했습니다. 나중에 다시 시도하십시오.",success:"성공",failed:"실패",verify:"검증",unauthorizedTips:"인증되지 않았습니다. 먼저 확인하십시오.",stopResponding:"응답 중지"},chat:{newChatButton:"새로운 채팅",placeholder:'무엇이든 물어보세요...(Shift + Enter = 줄바꿈, "/"를 눌러서 힌트를 보세요)',placeholderMobile:"무엇이든 물어보세요...",copy:"복사",copied:"복사됨",copyCode:"코드 복사",clearChat:"채팅 비우기",clearChatConfirm:"이 채팅을 비우시겠습니까?",exportImage:"이미지 내보내기",exportImageConfirm:"이 채팅을 png로 내보내시겠습니까?",exportSuccess:"내보내기 성공",exportFailed:"내보내기 실패",usingContext:"컨텍스트 모드",turnOnContext:"현재 모드에서는 이전 대화 기록을 포함하여 메시지를 보낼 수 있습니다.",turnOffContext:"현재 모드에서는 이전 대화 기록을 포함하지 않고 메시지를 보낼 수 있습니다.",deleteMessage:"메시지 삭제",deleteMessageConfirm:"이 메시지를 삭제하시겠습니까?",deleteHistoryConfirm:"이 기록을 삭제하시겠습니까?",clearHistoryConfirm:"채팅 기록을 삭제하시겠습니까?",preview:"미리보기",showRawText:"원본 텍스트로 보기"},setting:{setting:"설정",general:"일반",advanced:"고급",config:"설정",avatarLink:"아바타 링크",name:"이름",description:"설명",role:"역할",temperature:"온도",top_p:"Top_p",resetUserInfo:"사용자 정보 초기화",chatHistory:"채팅 기록",theme:"테마",language:"언어",api:"API",reverseProxy:"리버스 프록시",timeout:"타임아웃",socks:"Socks",httpsProxy:"HTTPS 프록시",balance:"API 잔액",monthlyUsage:"월 사용량"},store:{siderButton:"프롬프트 저장소",local:"로컬",online:"온라인",title:"제목",description:"설명",clearStoreConfirm:"데이터를 삭제하시겠습니까?",importPlaceholder:"여기에 JSON 데이터를 붙여넣으십시오",addRepeatTitleTips:"제목 중복됨, 다시 입력하십시오",addRepeatContentTips:"내용 중복됨: {msg}, 다시 입력하십시오",editRepeatTitleTips:"제목 충돌, 수정하십시오",editRepeatContentTips:"내용 충돌 {msg} , 수정하십시오",importError:"키 값 불일치",importRepeatTitle:"제목이 반복되어 건너뜀: {msg}",importRepeatContent:"내용이 반복되어 건너뜀: {msg}",onlineImportWarning:"참고: JSON 파일 소스를 확인하십시오!"}},"zh-CN":{common:{add:"添加",addSuccess:"添加成功",edit:"编辑",editSuccess:"编辑成功",delete:"删除",deleteSuccess:"删除成功",save:"保存",saveSuccess:"保存成功",reset:"重置",action:"操作",export:"导出",exportSuccess:"导出成功",import:"导入",importSuccess:"导入成功",clear:"清空",clearSuccess:"清空成功",yes:"是",no:"否",confirm:"确定",download:"下载",noData:"暂无数据",wrong:"好像出错了，请稍后再试。",success:"操作成功",failed:"操作失败",verify:"验证",cancel:"取消",unauthorizedTips:"未经授权，请先进行验证。",stopResponding:"停止响应"},chat:{newChatButton:"新建聊天",placeholder:"输入套图关键字实时或模糊搜索...（Shift + Enter = 换行）",placeholderMobile:"输入套图关键字实时或模糊搜索...",copy:"复制",copied:"复制成功",copyCode:"复制代码",clearChat:"清空会话",clearChatConfirm:"是否清空会话?",exportImage:"保存会话到图片",exportImageConfirm:"是否将会话保存为图片?",exportSuccess:"保存成功",exportFailed:"保存失败",usingContext:"上下文模式",turnOnContext:"当前模式下, 发送消息会携带之前的聊天记录",turnOffContext:"当前模式下, 发送消息不会携带之前的聊天记录",deleteMessage:"删除消息",deleteMessageConfirm:"是否删除此消息?",deleteHistoryConfirm:"确定删除此记录?",clearHistoryConfirm:"确定清空记录?",preview:"预览",showRawText:"显示原文"},setting:{siteName:"爱变色",setting:"设置",general:"总览",advanced:"高级",config:"配置",avatarLink:"头像链接",name:"名称",description:"描述",role:"角色设定",temperature:"Temperature",top_p:"Top_p",resetUserInfo:"重置用户信息",chatHistory:"聊天记录",theme:"主题",language:"语言",api:"API",reverseProxy:"反向代理",timeout:"超时",socks:"Socks",httpsProxy:"HTTPS Proxy",balance:"API余额",monthlyUsage:"本月使用量"},store:{siderButton:"提示词商店",local:"本地",online:"在线",title:"标题",description:"描述",clearStoreConfirm:"是否清空数据？",importPlaceholder:"请粘贴 JSON 数据到此处",addRepeatTitleTips:"标题重复，请重新输入",addRepeatContentTips:"内容重复：{msg}，请重新输入",editRepeatTitleTips:"标题冲突，请重新修改",editRepeatContentTips:"内容冲突{msg} ，请重新修改",importError:"键值不匹配",importRepeatTitle:"标题重复跳过：{msg}",importRepeatContent:"内容重复跳过：{msg}",onlineImportWarning:"注意：请检查 JSON 文件来源！",downloadError:"请检查网络状态与 JSON 文件有效性"}},"zh-TW":{common:{add:"新增",addSuccess:"新增成功",edit:"編輯",editSuccess:"編輯成功",delete:"刪除",deleteSuccess:"刪除成功",save:"儲存",saveSuccess:"儲存成功",reset:"重設",action:"操作",export:"匯出",exportSuccess:"匯出成功",import:"匯入",importSuccess:"匯入成功",clear:"清除",clearSuccess:"清除成功",yes:"是",no:"否",confirm:"確認",download:"下載",noData:"目前無資料",wrong:"發生錯誤，請稍後再試。",success:"操作成功",failed:"操作失敗",verify:"驗證",unauthorizedTips:"未經授權，請先進行驗證。",stopResponding:"停止回應"},chat:{newChatButton:"新增對話",placeholder:'來說點什麼...（Shift + Enter = 換行，"/" 觸發提示詞）',placeholderMobile:"來說點什麼...",copy:"複製",copied:"複製成功",copyCode:"複製代碼",clearChat:"清除對話",clearChatConfirm:"是否清空對話?",exportImage:"儲存對話為圖片",exportImageConfirm:"是否將對話儲存為圖片?",exportSuccess:"儲存成功",exportFailed:"儲存失敗",usingContext:"上下文模式",turnOnContext:"啟用上下文模式，在此模式下，發送訊息會包含之前的聊天記錄。",turnOffContext:"關閉上下文模式，在此模式下，發送訊息不會包含之前的聊天記錄。",deleteMessage:"刪除訊息",deleteMessageConfirm:"是否刪除此訊息?",deleteHistoryConfirm:"確定刪除此紀錄?",clearHistoryConfirm:"確定清除紀錄?",preview:"預覽",showRawText:"顯示原文"},setting:{setting:"設定",general:"總覽",advanced:"進階",config:"設定",avatarLink:"頭貼連結",name:"名稱",description:"描述",role:"角色設定",temperature:"Temperature",top_p:"Top_p",resetUserInfo:"重設使用者資訊",chatHistory:"紀錄",theme:"主題",language:"語言",api:"API",reverseProxy:"反向代理",timeout:"逾時",socks:"Socks",httpsProxy:"HTTPS Proxy",balance:"API Credit 餘額",monthlyUsage:"本月使用量"},store:{siderButton:"提示詞商店",local:"本機",online:"線上",title:"標題",description:"描述",clearStoreConfirm:"是否清除資料？",importPlaceholder:"請將 JSON 資料貼在此處",addRepeatTitleTips:"標題重複，請重新輸入",addRepeatContentTips:"內容重複：{msg}，請重新輸入",editRepeatTitleTips:"標題衝突，請重新修改",editRepeatContentTips:"內容衝突{msg} ，請重新修改",importError:"鍵值不符合",importRepeatTitle:"因標題重複跳過：{msg}",importRepeatContent:"因內容重複跳過：{msg}",onlineImportWarning:"注意：請檢查 JSON 檔案來源！",downloadError:"請檢查網路狀態與 JSON 檔案有效性"}},"ru-RU":{common:{add:"Добавить",addSuccess:"Добавлено успешно",edit:"Редактировать",editSuccess:"Изменено успешно",delete:"Удалить",deleteSuccess:"Удалено успешно",save:"Сохранить",saveSuccess:"Сохранено успешно",reset:"Сбросить",action:"Действие",export:"Экспортировать",exportSuccess:"Экспорт выполнен успешно",import:"Импортировать",importSuccess:"Импорт выполнен успешно",clear:"Очистить",clearSuccess:"Очищено успешно",yes:"Да",no:"Нет",confirm:"Подтвердить",download:"Загрузить",noData:"Нет данных",wrong:"Что-то пошло не так, пожалуйста, повторите попытку позже.",success:"Успех",failed:"Не удалось",verify:"Проверить",unauthorizedTips:"Не авторизован, сначала подтвердите свою личность.",stopResponding:"Прекращение отклика"},chat:{newChatButton:"Новый чат",placeholder:'Спросите меня о чем-нибудь ... (Shift + Enter = перенос строки, "/" для вызова подсказок)',placeholderMobile:"Спросите меня о чем-нибудь ...",copy:"Копировать",copied:"Скопировано",copyCode:"Копировать код",clearChat:"Очистить чат",clearChatConfirm:"Вы уверены, что хотите очистить этот чат?",exportImage:"Экспорт в изображение",exportImageConfirm:"Вы уверены, что хотите экспортировать этот чат в формате PNG?",exportSuccess:"Экспортировано успешно",exportFailed:"Не удалось выполнить экспорт",usingContext:"Режим контекста",turnOnContext:"В текущем режиме отправка сообщений будет включать предыдущие записи чата.",turnOffContext:"В текущем режиме отправка сообщений не будет включать предыдущие записи чата.",deleteMessage:"Удалить сообщение",deleteMessageConfirm:"Вы уверены, что хотите удалить это сообщение?",deleteHistoryConfirm:"Вы уверены, что хотите очистить эту историю?",clearHistoryConfirm:"Вы уверены, что хотите очистить историю чата?",preview:"Предварительный просмотр",showRawText:"Показать как обычный текст"},setting:{setting:"Настройки",general:"Общее",advanced:"Дополнительно",config:"Конфигурация",avatarLink:"Ссылка на аватар",name:"Имя",description:"Описание",role:"Роль",temperature:"Температура",top_p:"Top_p",resetUserInfo:"Сбросить информацию о пользователе",chatHistory:"История чата",theme:"Тема",language:"Язык",api:"API",reverseProxy:"Обратный прокси-сервер",timeout:"Время ожидания",socks:"Socks",httpsProxy:"HTTPS-прокси",balance:"Баланс API",monthlyUsage:"Ежемесячное использование"},store:{siderButton:"Хранилище подсказок",local:"Локальное",online:"Онлайн",title:"Название",description:"Описание",clearStoreConfirm:"Вы действительно хотите очистить данные?",importPlaceholder:"Пожалуйста, вставьте здесь JSON-данные",addRepeatTitleTips:"Дубликат названия, пожалуйста, введите другое название",addRepeatContentTips:"Дубликат содержимого: {msg}, пожалуйста, введите другой текст",editRepeatTitleTips:"Конфликт названий, пожалуйста, измените название",editRepeatContentTips:"Конфликт содержимого {msg}, пожалуйста, измените текст",importError:"Не совпадает ключ-значение",importRepeatTitle:"Название повторяющееся, пропускается: {msg}",importRepeatContent:"Содержание повторяющееся, пропускается: {msg}",onlineImportWarning:"Внимание! Проверьте источник JSON-файла!",downloadError:"Проверьте состояние сети и правильность JSON-файла"}}}}),et=Ze.global.t;function tt(e){Ze.global.locale=e}function at(e){e.use(Ze)}const st={class:"p-4 space-y-5 min-h-[200px]"},ot={class:"space-y-6"},it={class:"flex items-center space-x-4"},nt={class:"flex-shrink-0 w-[100px]"},rt={class:"flex-1"},lt={class:"flex items-center space-x-4"},ct={class:"flex-shrink-0 w-[100px]"},ut={class:"w-[200px]"},dt={class:"flex items-center space-x-4"},pt={class:"flex-shrink-0 w-[100px]"},mt={class:"flex-1"},ht={class:"flex-shrink-0 w-[100px]"},vt={class:"flex flex-wrap items-center gap-4"},gt={class:"flex items-center space-x-4"},ft={class:"flex-shrink-0 w-[100px]"},yt={class:"flex flex-wrap items-center gap-4"},xt={class:"flex items-center space-x-4"},wt={class:"flex-shrink-0 w-[100px]"},St={class:"flex flex-wrap items-center gap-4"},kt={class:"flex items-center space-x-4"},Ct={class:"flex-shrink-0 w-[100px]"},_t=e({__name:"General",setup(e){const t=ue(),s=Le(),{isMobile:r}=Oe(),l=N(),u=c((()=>t.theme)),d=c((()=>s.userInfo)),p=C(d.value.avatar??""),m=C(d.value.name??""),h=C(d.value.description??""),v=c({get:()=>t.language,set(e){t.setLanguage(e)}}),g=[{label:"Auto",key:"auto",icon:"ri:contrast-line"},{label:"Light",key:"light",icon:"ri:sun-foggy-line"},{label:"Dark",key:"dark",icon:"ri:moon-foggy-line"}],f=[{label:"简体中文",key:"zh-CN",value:"zh-CN"},{label:"繁體中文",key:"zh-TW",value:"zh-TW"},{label:"English",key:"en-US",value:"en-US"},{label:"한국어",key:"ko-KR",value:"ko-KR"},{label:"Русский язык",key:"ru-RU",value:"ru-RU"}];function S(e){s.updateUserInfo(e),l.success(et("common.success"))}function k(){s.resetUserInfo(),l.success(et("common.success")),window.location.reload()}function P(){const e=function(){const e=new Date,t=e.getDate(),a=e.getMonth()+1;return`${e.getFullYear()}-${a}-${t}`}(),t=localStorage.getItem("chatStorage")||"{}",a=JSON.stringify(JSON.parse(t),null,2),s=new Blob([a],{type:"application/json"}),o=URL.createObjectURL(s),i=document.createElement("a");i.href=o,i.download=`chat-store_${e}.json`,document.body.appendChild(i),i.click(),document.body.removeChild(i)}function I(e){const t=e.target;if(!t||!t.files)return;const a=t.files[0];if(!a)return;const s=new FileReader;s.onload=()=>{try{const e=JSON.parse(s.result);localStorage.setItem("chatStorage",JSON.stringify(e)),l.success(et("common.success")),location.reload()}catch(e){l.error(et("common.invalidFileFormat"))}},s.readAsText(a)}function E(){localStorage.removeItem("chatStorage"),location.reload()}function $(){const e=document.getElementById("fileInput");e&&e.click()}return(e,s)=>(a(),y("div",st,[x("div",ot,[x("div",it,[x("span",nt,w(e.$t("setting.avatarLink")),1),x("div",rt,[i(n(M),{value:p.value,"onUpdate:value":s[0]||(s[0]=e=>p.value=e),placeholder:""},null,8,["value"])]),i(n(H),{size:"tiny",text:"",type:"primary",onClick:s[1]||(s[1]=e=>S({avatar:p.value}))},{default:o((()=>[_(w(e.$t("common.save")),1)])),_:1})]),x("div",lt,[x("span",ct,w(e.$t("setting.name")),1),x("div",ut,[i(n(M),{value:m.value,"onUpdate:value":s[2]||(s[2]=e=>m.value=e),placeholder:""},null,8,["value"])]),i(n(H),{size:"tiny",text:"",type:"primary",onClick:s[3]||(s[3]=e=>S({name:m.value}))},{default:o((()=>[_(w(e.$t("common.save")),1)])),_:1})]),x("div",dt,[x("span",pt,w(e.$t("setting.description")),1),x("div",mt,[i(n(M),{value:h.value,"onUpdate:value":s[4]||(s[4]=e=>h.value=e),placeholder:""},null,8,["value"])]),i(n(H),{size:"tiny",text:"",type:"primary",onClick:s[5]||(s[5]=e=>S({description:h.value}))},{default:o((()=>[_(w(e.$t("common.save")),1)])),_:1})]),x("div",{class:b(["flex items-center space-x-4",n(r)&&"items-start"])},[x("span",ht,w(e.$t("setting.chatHistory")),1),x("div",vt,[i(n(H),{size:"small",onClick:P},{icon:o((()=>[i(n(ie),{icon:"ri:download-2-fill"})])),default:o((()=>[_(" "+w(e.$t("common.export")),1)])),_:1}),x("input",{id:"fileInput",type:"file",style:{display:"none"},onChange:I},null,32),i(n(H),{size:"small",onClick:$},{icon:o((()=>[i(n(ie),{icon:"ri:upload-2-fill"})])),default:o((()=>[_(" "+w(e.$t("common.import")),1)])),_:1}),i(n(B),{placement:"bottom",onPositiveClick:E},{trigger:o((()=>[i(n(H),{size:"small"},{icon:o((()=>[i(n(ie),{icon:"ri:close-circle-line"})])),default:o((()=>[_(" "+w(e.$t("common.clear")),1)])),_:1})])),default:o((()=>[_(" "+w(e.$t("chat.clearHistoryConfirm")),1)])),_:1})])],2),x("div",gt,[x("span",ft,w(e.$t("setting.theme")),1),x("div",yt,[(a(),y(T,null,R(g,(e=>i(n(H),{key:e.key,size:"small",type:e.key===n(u)?"primary":void 0,onClick:a=>n(t).setTheme(e.key)},{icon:o((()=>[i(n(ie),{icon:e.icon},null,8,["icon"])])),_:2},1032,["type","onClick"]))),64))])]),x("div",xt,[x("span",wt,w(e.$t("setting.language")),1),x("div",St,[i(n(J),{style:{width:"140px"},value:n(v),options:f,onUpdateValue:s[6]||(s[6]=e=>n(t).setLanguage(e))},null,8,["value"])])]),x("div",kt,[x("span",Ct,w(e.$t("setting.resetUserInfo")),1),i(n(H),{size:"small",onClick:k},{default:o((()=>[_(w(e.$t("common.reset")),1)])),_:1})])])]))}}),bt={class:"p-4 space-y-5 min-h-[200px]"},Tt={class:"space-y-6"},Rt={class:"flex items-center space-x-4"},Pt={class:"flex-shrink-0 w-[120px]"},It={class:"flex-1"},Et={class:"flex items-center space-x-4"},$t={class:"flex-shrink-0 w-[120px]"},Ot={class:"flex-1"},Ut={class:"flex items-center space-x-4"},zt={class:"flex-shrink-0 w-[120px]"},jt={class:"flex-1"},At={class:"flex items-center space-x-4"},Nt=x("span",{class:"flex-shrink-0 w-[120px]"}," ",-1),Lt=e({__name:"Advanced",setup(e){const t=Be(),s=N(),r=C(t.systemMessage??""),l=C(t.temperature??.5),c=C(t.top_p??1);function u(e){t.updateSetting(e),s.success(et("common.success"))}function d(){t.resetSetting(),s.success(et("common.success")),window.location.reload()}return(e,t)=>(a(),y("div",bt,[x("div",Tt,[x("div",Rt,[x("span",Pt,w(e.$t("setting.role")),1),x("div",It,[i(n(M),{value:r.value,"onUpdate:value":t[0]||(t[0]=e=>r.value=e),type:"textarea",autosize:{minRows:1,maxRows:4}},null,8,["value"])]),i(n(H),{size:"tiny",text:"",type:"primary",onClick:t[1]||(t[1]=e=>u({systemMessage:r.value}))},{default:o((()=>[_(w(e.$t("common.save")),1)])),_:1})]),x("div",Et,[x("span",$t,w(e.$t("setting.temperature")),1),x("div",Ot,[i(n(V),{value:l.value,"onUpdate:value":t[2]||(t[2]=e=>l.value=e),max:2,min:0,step:.1},null,8,["value","step"])]),x("span",null,w(l.value),1),i(n(H),{size:"tiny",text:"",type:"primary",onClick:t[3]||(t[3]=e=>u({temperature:l.value}))},{default:o((()=>[_(w(e.$t("common.save")),1)])),_:1})]),x("div",Ut,[x("span",zt,w(e.$t("setting.top_p")),1),x("div",jt,[i(n(V),{value:c.value,"onUpdate:value":t[4]||(t[4]=e=>c.value=e),max:1,min:0,step:.1},null,8,["value","step"])]),x("span",null,w(c.value),1),i(n(H),{size:"tiny",text:"",type:"primary",onClick:t[5]||(t[5]=e=>u({top_p:c.value}))},{default:o((()=>[_(w(e.$t("common.save")),1)])),_:1})]),x("div",At,[Nt,i(n(H),{size:"small",onClick:d},{default:o((()=>[_(w(e.$t("common.reset")),1)])),_:1})])])]))}}),Dt={name:"aibianse",version:"2.11.1",private:!1,description:"爱变色",author:"爱变色",keywords:["aibianse","爱变色"],scripts:{dev:"vite",build:"run-p type-check-warn build-only",preview:"vite preview","build-only":"vite build","type-check-warn":"vue-tsc --noEmit || exit 0",lint:"eslint .","lint:fix":"eslint . --fix",bootstrap:"pnpm install && pnpm run common:prepare","common:cleanup":"rimraf node_modules && rimraf pnpm-lock.yaml","common:prepare":"husky install"},dependencies:{"@traptitech/markdown-it-katex":"^3.6.0","@types/hls.js":"^1.0.0","@vueuse/core":"^9.13.0",artplayer:"^5.2.2","highlight.js":"^11.7.0","hls.js":"^1.5.20",html2canvas:"^1.4.1",katex:"^0.16.4","lodash-es":"^4.17.21","markdown-it":"^13.0.1","naive-ui":"^2.41.0",pinia:"^2.0.33",terser:"^5.37.0","vite-plugin-compression":"^0.5.1",vue:"^3.2.47","vue-i18n":"^9.2.2","vue-router":"^4.1.6"},devDependencies:{"@antfu/eslint-config":"^0.35.3","@commitlint/cli":"^17.4.4","@commitlint/config-conventional":"^17.4.4","@iconify-json/material-symbols-light":"^1.2.12","@iconify/vue":"^4.1.0","@types/crypto-js":"^4.1.1","@types/katex":"^0.16.0","@types/markdown-it":"^12.2.3","@types/markdown-it-link-attributes":"^3.0.1","@types/node":"^18.19.74","@vitejs/plugin-vue":"^4.0.0",autoprefixer:"^10.4.13",axios:"^1.3.4","crypto-js":"^4.1.1",eslint:"^8.35.0",husky:"^8.0.3",less:"^4.1.3","lint-staged":"^13.1.2","markdown-it-link-attributes":"^4.0.1","npm-run-all":"^4.1.5",postcss:"^8.4.21",rimraf:"^4.3.0",sass:"^1.83.4",tailwindcss:"^3.2.7",typescript:"~4.9.5",vite:"^4.2.0","vite-plugin-pwa":"^0.14.4","vue-tsc":"^1.2.0"},"lint-staged":{"*.{ts,tsx,vue}":["pnpm lint:fix"]}},Mt={class:"p-4 space-y-4"},Ht={class:"text-xl font-bold"},Bt=x("div",{class:"p-2 space-y-2 rounded-md bg-neutral-100 dark:bg-neutral-700"},[x("p",null,[_(" 此项目开源于 "),x("a",{class:"text-blue-600 dark:text-blue-500",href:"https://github.com/Chanzhaoyu/chatgpt-web",target:"_blank"}," GitHub "),_(" ，免费且基于 MIT 协议，没有任何形式的付费行为！ ")]),x("p",null," 如果你觉得此项目对你有帮助，请在 GitHub 帮我点个 Star 或者给予一点赞助，谢谢！ ")],-1),Jt={key:0},Vt=e({__name:"About",setup(e){const t=C(!1),i=C();return P((()=>{!async function(){try{t.value=!0;const{data:e}=await we({url:"/config"});i.value=e}finally{t.value=!1}}()})),(e,r)=>(a(),s(n(q),{show:t.value},{default:o((()=>{var t,s,o,r,l;return[x("div",Mt,[x("h2",Ht," Version - "+w(n(Dt).version),1),Bt,x("p",null,w(e.$t("setting.api"))+"："+w((null==(t=i.value)?void 0:t.apiModel)??"-"),1),(a(),y("p",Jt,w(e.$t("setting.monthlyUsage"))+"："+w((null==(s=i.value)?void 0:s.usage)??"-"),1)),S("",!0),x("p",null,w(e.$t("setting.timeout"))+"："+w((null==(o=i.value)?void 0:o.timeoutMs)??"-"),1),x("p",null,w(e.$t("setting.socks"))+"："+w((null==(r=i.value)?void 0:r.socksProxy)??"-"),1),x("p",null,w(e.$t("setting.httpsProxy"))+"："+w((null==(l=i.value)?void 0:l.httpsProxy)??"-"),1)])]})),_:1},8,["show"]))}}),qt={class:"ml-2"},Gt={class:"min-h-[100px]"},Ft={class:"ml-2"},Wt={class:"min-h-[100px]"},Kt={class:"ml-2"},Yt=e({__name:"index",props:{visible:{type:Boolean}},emits:["update:visible"],setup(e,{emit:t}){const r=e,l=C("General"),u=c({get:()=>r.visible,set(e){t("update:visible",e)}});return(e,t)=>(a(),s(n(W),{show:n(u),"onUpdate:show":t[1]||(t[1]=e=>I(u)?u.value=e:null),"auto-focus":!1,preset:"card",style:{width:"95%","max-width":"640px"}},{default:o((()=>[x("div",null,[i(n(G),{value:l.value,"onUpdate:value":t[0]||(t[0]=e=>l.value=e),type:"line",animated:""},{default:o((()=>[i(n(F),{name:"General",tab:"General"},{tab:o((()=>[i(n(ie),{class:"text-lg",icon:"ri:file-user-line"}),x("span",qt,w(e.$t("setting.general")),1)])),default:o((()=>[x("div",Gt,[i(_t)])])),_:1}),(a(),s(n(F),{key:0,name:"Advanced",tab:"Advanced"},{tab:o((()=>[i(n(ie),{class:"text-lg",icon:"ri:equalizer-line"}),x("span",Ft,w(e.$t("setting.advanced")),1)])),default:o((()=>[x("div",Wt,[i(Lt)])])),_:1})),i(n(F),{name:"Config",tab:"Config"},{tab:o((()=>[i(n(ie),{class:"text-lg",icon:"ri:list-settings-line"}),x("span",Kt,w(e.$t("setting.config")),1)])),default:o((()=>[i(Vt)])),_:1})])),_:1},8,["value"])])])),_:1},8,["show"]))}}),Qt=Object.freeze(Object.defineProperty({__proto__:null,default:Yt},Symbol.toStringTag,{value:"Module"})),Xt=[{key:"awesome-chatgpt-prompts-zh",desc:"ChatGPT 中文调教指南",downloadUrl:"https://raw.githubusercontent.com/PlexPt/awesome-chatgpt-prompts-zh/main/prompts-zh.json",url:"https://github.com/PlexPt/awesome-chatgpt-prompts-zh"},{key:"awesome-chatgpt-prompts-zh-TW",desc:"ChatGPT 中文調教指南 (透過 OpenAI / OpenCC 協助，從簡體中文轉換為繁體中文的版本)",downloadUrl:"https://raw.githubusercontent.com/PlexPt/awesome-chatgpt-prompts-zh/main/prompts-zh-TW.json",url:"https://github.com/PlexPt/awesome-chatgpt-prompts-zh"}],Zt={class:"space-y-4"},ea={class:"flex items-center space-x-4"},ta={class:"flex items-center"},aa={class:"flex flex-col items-center gap-2"},sa={class:"mb-4"},oa={class:"flex items-center gap-4"},ia={class:"max-h-[360px] overflow-y-auto space-y-4"},na=["title"],ra={class:"flex items-center justify-end space-x-4"},la=["href"],ca=e({__name:"index",props:{visible:{type:Boolean}},emits:["update:visible"],setup(e,{emit:r}){const l=e,u=N(),d=c({get:()=>l.visible,set:e=>r("update:visible",e)}),p=C(!1),m=C(!1),h=C(!1),v=C(""),{isMobile:g}=Oe(),f=Me(),k=Xt,P=C(f.promptList),$=C(""),O=C(""),U=C(""),z=C({}),j=(e,t={key:"",value:""})=>{"add"===e?($.value="",O.value=""):"modify"===e?(z.value={...t},$.value=t.key,O.value=t.value):"local_import"===e&&($.value="local_import",O.value=""),p.value=!p.value,U.value=e},A=C(""),L=c((()=>A.value.trim().length<1)),D=c((()=>$.value.trim().length<1||O.value.trim().length<1)),J=e=>{P.value=[...P.value.filter((t=>t.key!==e.key))],u.success(et("common.deleteSuccess"))},V=()=>{P.value=[],u.success(et("common.clearSuccess"))},q=(e="online")=>{try{const e=JSON.parse(O.value);let t="",a="";if("key"in e[0])t="key",a="value";else{if(!("act"in e[0]))throw u.warning("prompt key not supported."),new Error("prompt key not supported.");t="act",a="prompt"}for(const s of e){if(!(t in s)||!(a in s))throw new Error(et("store.importError"));let e=!0;for(const o of P.value){if(o.key===s[t]){u.warning(et("store.importRepeatTitle",{msg:s[t]})),e=!1;break}if(o.value===s[a]){u.warning(et("store.importRepeatContent",{msg:s[t]})),e=!1;break}}e&&P.value.unshift({key:s[t],value:s[a]})}u.success(et("common.importSuccess"))}catch{u.error("JSON 格式错误，请检查 JSON 格式")}"local"===e&&(p.value=!p.value)},ae=c((()=>{const[e,t]=g.value?[6,5]:[7,15];return{pageSize:e,pageSlot:t}})),se=[{title:et("store.title"),key:"renderKey"},{title:et("store.description"),key:"renderValue"},{title:et("common.action"),key:"actions",width:100,align:"center",render:e=>t("div",{class:"flex items-center flex-col gap-2"},{default:()=>[t(H,{tertiary:!0,size:"small",type:"info",onClick:()=>j("modify",e)},{default:()=>et("common.edit")}),t(H,{tertiary:!0,size:"small",type:"error",onClick:()=>J(e)},{default:()=>et("common.delete")})]})}];E((()=>P),(()=>{f.updatePromptList(P.value)}),{deep:!0});const oe=c((()=>{const e=(()=>{const[e,t]=g.value?[10,30]:[15,50];return P.value.map((a=>({renderKey:a.key.length<=e?a.key:`${a.key.substring(0,e)}...`,renderValue:a.value.length<=t?a.value:`${a.value.substring(0,t)}...`,key:a.key,value:a.value})))})(),t=v.value;return t&&""!==t?e.filter((e=>e.renderKey.includes(t)||e.renderValue.includes(t))):e}));return(e,t)=>(a(),y(T,null,[i(n(W),{show:n(d),"onUpdate:show":t[6]||(t[6]=e=>I(d)?d.value=e:null),style:{width:"90%","max-width":"900px"},preset:"card"},{default:o((()=>[x("div",Zt,[i(n(G),{type:"segment"},{default:o((()=>[i(n(F),{name:"local",tab:e.$t("store.local")},{default:o((()=>[x("div",{class:b(["flex gap-3 mb-4",[n(g)?"flex-col":"flex-row justify-between"]])},[x("div",ea,[i(n(H),{type:"primary",size:"small",onClick:t[0]||(t[0]=e=>j("add"))},{default:o((()=>[_(w(e.$t("common.add")),1)])),_:1}),i(n(H),{size:"small",onClick:t[1]||(t[1]=e=>j("local_import"))},{default:o((()=>[_(w(e.$t("common.import")),1)])),_:1}),i(n(H),{size:"small",loading:h.value,onClick:t[2]||(t[2]=e=>(()=>{h.value=!0;const e=JSON.stringify(P.value),t=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download="ChatGPTPromptTemplate.json",s.click(),URL.revokeObjectURL(a),h.value=!1})())},{default:o((()=>[_(w(e.$t("common.export")),1)])),_:1},8,["loading"]),i(n(B),{onPositiveClick:V},{trigger:o((()=>[i(n(H),{size:"small"},{default:o((()=>[_(w(e.$t("common.clear")),1)])),_:1})])),default:o((()=>[_(" "+w(e.$t("store.clearStoreConfirm")),1)])),_:1})]),x("div",ta,[i(n(M),{value:v.value,"onUpdate:value":t[3]||(t[3]=e=>v.value=e),style:{width:"100%"}},null,8,["value"])])],2),n(g)?S("",!0):(a(),s(n(K),{key:0,"max-height":400,columns:n(se),data:n(oe),pagination:n(ae),bordered:!1},null,8,["columns","data","pagination"])),n(g)?(a(),s(n(X),{key:1,style:{"max-height":"400px","overflow-y":"auto"}},{default:o((()=>[(a(!0),y(T,null,R(n(oe),((e,t)=>(a(),s(n(Y),{key:t},{suffix:o((()=>[x("div",aa,[i(n(H),{tertiary:"",size:"small",type:"info",onClick:t=>j("modify",e)},{default:o((()=>[_(w(n(et)("common.edit")),1)])),_:2},1032,["onClick"]),i(n(H),{tertiary:"",size:"small",type:"error",onClick:t=>J(e)},{default:o((()=>[_(w(n(et)("common.delete")),1)])),_:2},1032,["onClick"])])])),default:o((()=>[i(n(Q),{title:e.renderKey,description:e.renderValue},null,8,["title","description"])])),_:2},1024)))),128))])),_:1})):S("",!0)])),_:1},8,["tab"]),i(n(F),{name:"download",tab:e.$t("store.online")},{default:o((()=>[x("p",sa,w(e.$t("store.onlineImportWarning")),1),x("div",oa,[i(n(M),{value:A.value,"onUpdate:value":t[4]||(t[4]=e=>A.value=e),placeholder:""},null,8,["value"]),i(n(H),{strong:"",secondary:"",disabled:n(L),loading:m.value,onClick:t[5]||(t[5]=e=>(async()=>{try{m.value=!0;const e=await fetch(A.value),t=await e.json();if("key"in t[0]&&"value"in t[0]&&(O.value=JSON.stringify(t)),"act"in t[0]&&"prompt"in t[0]){const e=t.map((e=>({key:e.act,value:e.prompt})));O.value=JSON.stringify(e)}q(),A.value=""}catch{u.error(et("store.downloadError")),A.value=""}finally{m.value=!1}})())},{default:o((()=>[_(w(e.$t("common.download")),1)])),_:1},8,["disabled","loading"])]),i(n(Z)),x("div",ia,[(a(!0),y(T,null,R(n(k),(e=>(a(),s(n(ee),{key:e.key,title:e.key,bordered:!0,embedded:""},{footer:o((()=>[x("div",ra,[i(n(H),{text:""},{default:o((()=>[x("a",{href:e.url,target:"_blank"},[i(n(ie),{class:"text-xl",icon:"ri:link"})],8,la)])),_:2},1024),i(n(H),{text:"",onClick:t=>{return a=e.downloadUrl,void(A.value=a);var a}},{default:o((()=>[i(n(ie),{class:"text-xl",icon:"ri:add-fill"})])),_:2},1032,["onClick"])])])),default:o((()=>[x("p",{class:"overflow-hidden text-ellipsis whitespace-nowrap",title:e.desc},w(e.desc),9,na)])),_:2},1032,["title"])))),128))])])),_:1},8,["tab"])])),_:1})])])),_:1},8,["show"]),i(n(W),{show:p.value,"onUpdate:show":t[12]||(t[12]=e=>p.value=e),style:{width:"90%","max-width":"600px"},preset:"card"},{default:o((()=>["add"===U.value||"modify"===U.value?(a(),s(n(te),{key:0,vertical:""},{default:o((()=>[_(w(n(et)("store.title"))+" ",1),i(n(M),{value:$.value,"onUpdate:value":t[7]||(t[7]=e=>$.value=e)},null,8,["value"]),_(" "+w(n(et)("store.description"))+" ",1),i(n(M),{value:O.value,"onUpdate:value":t[8]||(t[8]=e=>O.value=e),type:"textarea"},null,8,["value"]),i(n(H),{block:"",type:"primary",disabled:n(D),onClick:t[9]||(t[9]=()=>{"add"===U.value?(()=>{for(const e of P.value){if(e.key===$.value)return void u.error(et("store.addRepeatTitleTips"));if(e.value===O.value)return void u.error(et("store.addRepeatContentTips",{msg:$.value}))}P.value.unshift({key:$.value,value:O.value}),u.success(et("common.addSuccess")),j("add")})():(()=>{let e=0;for(const a of P.value){if(a.key===z.value.key&&a.value===z.value.value)break;e+=1}const t=P.value.filter(((t,a)=>a!==e));for(const a of t){if(a.key===$.value)return void u.error(et("store.editRepeatTitleTips"));if(a.value===O.value)return void u.error(et("store.editRepeatContentTips",{msg:a.key}))}P.value=[{key:$.value,value:O.value},...t],u.success(et("common.editSuccess")),j("modify")})()})},{default:o((()=>[_(w(n(et)("common.confirm")),1)])),_:1},8,["disabled"])])),_:1})):S("",!0),"local_import"===U.value?(a(),s(n(te),{key:1,vertical:""},{default:o((()=>[i(n(M),{value:O.value,"onUpdate:value":t[10]||(t[10]=e=>O.value=e),placeholder:n(et)("store.importPlaceholder"),autosize:{minRows:3,maxRows:15},type:"textarea"},null,8,["value","placeholder"]),i(n(H),{block:"",type:"primary",disabled:n(D),onClick:t[11]||(t[11]=()=>{q("local")})},{default:o((()=>[_(w(n(et)("common.import")),1)])),_:1},8,["disabled"])])),_:1})):S("",!0)])),_:1},8,["show"])],64))}});export{Ce as T,ie as _,$e as a,Oe as b,et as c,Re as d,Te as e,Se as f,_e as g,Xe as h,Pe as i,he as j,ca as k,Ae as l,Ie as m,Ee as n,tt as o,oe as p,Je as q,at as r,be as s,ke as t,ue as u,je as v,Qt as w};
